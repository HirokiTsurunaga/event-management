# イベント管理SaaS 要件定義書

## 1. プロジェクト概要

イベント管理SaaSは、イベント主催者（管理者）がイベントの作成、参加者の管理、入場管理、アンケート作成・集計を一貫して行えるシステムです。

### 1.1 開発技術スタック
- **フロントエンド**: React + TypeScript
- **バックエンド**: PHP + Laravel
- **データベース**: PostgreSQL
- **開発・デプロイ環境**: Docker, Docker Compose

## 2. 機能要件

### 2.1 ユーザー区分
- **管理者**: イベント主催者、イベント作成・管理を行うユーザー
- **参加者**: イベントに参加申し込みを行い、実際に参加するユーザー

### 2.2 イベント管理機能
#### 2.2.1 イベント作成・編集 (管理者)
- イベント名、日時、場所、定員、説明文等の基本情報設定
- イベント公開/非公開設定
- イベント画像アップロード機能
- イベントのコピー機能（過去のイベントを複製して新規作成）

#### 2.2.2 イベント一覧・詳細表示
- **管理者向け**: 自身が作成したイベント一覧、各種統計情報
- **参加者向け**: 公開中のイベント一覧、イベント詳細閲覧

### 2.3 参加申し込み機能
- イベントへの参加申し込みフォーム
- 参加者情報登録（氏名、メールアドレス、所属等）
- 申し込み確認メール自動送信
- キャンセル・変更機能

### 2.4 参加者管理機能 (管理者)
- 参加者一覧表示
- 参加者情報の検索・フィルタリング
- 参加者データCSVエクスポート
- 参加者への一斉メール送信

### 2.5 入場管理機能
- **参加者**: スマートフォンでQRコード表示
- **管理者**: QRコードスキャンによる入場確認
- リアルタイム入場状況確認

### 2.6 アンケート機能
#### 2.6.1 アンケート作成 (管理者)
- 質問項目のカスタマイズ（選択肢、自由記述等）
- アンケートテンプレート保存・再利用
- 必須/任意項目設定

#### 2.6.2 アンケート回答 (参加者)
- イベント後のアンケート回答フォーム
- モバイルフレンドリーな回答インターフェース

#### 2.6.3 アンケート結果管理 (管理者)
- 回答結果のWeb上での閲覧・集計
- グラフ・チャートによる可視化
- CSVデータエクスポート

## 3. 非機能要件

### 3.1 パフォーマンス要件
- ページ読み込み時間: 3秒以内
- 同時アクセスユーザー: 最大500ユーザーを想定
- データベースクエリ応答: 1秒以内

### 3.2 セキュリティ要件
- SSL/TLS対応（HTTPS通信）
- ユーザー認証・認可
- CSRF対策
- XSS対策
- SQLインジェクション対策
- 個人情報の暗号化保存

### 3.3 可用性要件
- システム稼働率: 99.5%以上
- 定期バックアップ

### 3.4 ユーザビリティ要件
- レスポンシブデザイン対応（PC、タブレット、スマートフォン）
- アクセシビリティ対応（WCAG 2.1 AAレベル）
- 多言語対応（日本語・英語）

## 4. システムアーキテクチャ

### 4.1 システム構成図
```
[ユーザー] ⟷ [Webサーバー] ⟷ [アプリケーションサーバー] ⟷ [データベース]
```

### 4.2 Docker構成
- **フロントエンドコンテナ**: React + TypeScript 開発環境
  - Node.js環境
  - 開発時はHot Reloadingを有効化
  - 本番ビルド用の軽量コンテナ（Nginxベース）

- **バックエンドコンテナ**: PHP + Laravel 実行環境
  - PHP-FPM構成
  - Composerによる依存関係管理
  - Artisanコマンド実行環境

- **データベースコンテナ**: PostgreSQL
  - 永続化ボリュームによるデータ保存
  - 自動バックアップ設定

- **Nginx/Webサーバーコンテナ**: 
  - フロントエンドの静的ファイル配信
  - APIリクエストのバックエンドへのプロキシ
  - HTTPSの終端処理

- **Redis/Cacheコンテナ**:
  - セッション管理
  - キャッシュストレージ

コンテナ間通信:
- フロントエンド・バックエンド間: RESTful API（JSON形式）
- バックエンド・データベース間: TCP接続
- ネットワークは内部ブリッジで分離し、必要なコンテナ間のみ通信可能に設定

docker-compose.ymlで上記コンテナを定義し、開発環境と本番環境で一貫した実行環境を構築します。

### 4.3 CI/CDパイプライン

GitHubリポジトリと連携したCI/CDパイプラインを構築します:

1. **継続的インテグレーション (CI)**:
   - GitHub Actionsを使用
   - コードプッシュ時の自動テスト実行
     - フロントエンド: ESLint, Jest
     - バックエンド: PHPUnit
   - コードの静的解析
   - テストカバレッジレポート生成

2. **継続的デリバリー/デプロイメント (CD)**:
   - 開発環境: フィーチャーブランチのマージ時に自動デプロイ
   - ステージング環境: developブランチへのマージ時に自動デプロイ
   - 本番環境: masterブランチへのマージ後手動承認による半自動デプロイ

3. **デプロイ戦略**:
   - Blue/Greenデプロイメント方式
   - ロールバック機能

### 4.4 環境分離

システムは以下の環境を明確に分離して管理します:

1. **開発環境 (Development)**:
   - 各開発者のローカル環境
   - Dockerコンテナによる一貫した環境
   - `.env.development`ファイルによる環境変数管理
   - モックデータ/テストデータの使用

2. **テスト環境 (Testing/QA)**:
   - 自動テスト用環境
   - CI/CDパイプラインと連携
   - テストデータセットの管理
   - `.env.testing`ファイルによる環境変数管理

3. **ステージング環境 (Staging)**:
   - 本番と同一構成
   - 本番データの匿名化コピーを使用
   - 最終検証用
   - `.env.staging`ファイルによる環境変数管理

4. **本番環境 (Production)**:
   - 実ユーザーが利用する環境
   - スケーリング設定有効
   - 強化されたセキュリティ設定
   - `.env.production`ファイルによる環境変数管理

各環境間の移行は自動化し、環境差異によるバグを最小化します。環境ごとに異なる設定（API接続先、ログレベル、機能フラグなど）は環境変数で制御します。

### 4.5 データベース設計（主要テーブル）
- Users (ユーザー情報)
- Events (イベント情報)
- Registrations (参加登録情報)
- CheckIns (入場記録)
- Surveys (アンケート情報)
- SurveyQuestions (アンケート質問)
- SurveyResponses (アンケート回答)

## 5. 画面設計（主要画面）

### 5.1 管理者向け画面
- ログイン/ダッシュボード
- イベント管理（一覧/作成/編集）
- 参加者管理
- 入場管理・QRコードスキャン
- アンケート作成・結果閲覧

### 5.2 参加者向け画面
- イベント一覧/詳細
- 参加申し込みフォーム
- マイページ（申し込み履歴、QRコード表示）
- アンケート回答フォーム

## 6. 開発スケジュール（仮）

1. 要件定義・設計: 2週間
2. Docker環境構築: 1週間
3. フロントエンド開発: 4週間
4. バックエンド開発: 4週間
5. 統合テスト: 2週間
6. UAT（ユーザー受け入れテスト）: 1週間
7. リリース準備: 1週間

合計: 約3.5ヶ月

## 7. MVP（Minimum Viable Product）開発計画

MVP開発では、核となる価値提供に集中し、最小限の機能セットで早期リリースを目指します。

### 7.1 MVP対象機能

#### 7.1.1 フェーズ1（最優先実装）
- **基本認証システム**
  - 管理者アカウント登録・ログイン
  - 参加者アカウント登録・ログイン（メールアドレスのみ）

- **イベント管理（基本）**
  - シンプルなイベント作成（名前、日時、場所、説明のみ）
  - イベント一覧表示
  - イベント詳細表示

- **参加申し込み（基本）**
  - イベント参加申し込みフォーム（基本情報のみ）
  - 参加者一覧の管理者向け表示

- **入場管理（コア機能）**
  - 参加者QRコード生成・表示
  - 管理者QRコードスキャン機能
  - 入場ステータス管理

#### 7.1.2 フェーズ2（MVP後続リリース）
- **アンケート機能（基本）**
  - シンプルな事前定義アンケート
  - アンケート結果の集計と表示

- **参加者データCSVエクスポート**
  - 基本的な参加者情報のCSVエクスポート

- **イベント管理（拡張）**
  - イベント編集機能
  - イベント公開/非公開設定

### 7.2 MVP除外機能（将来実装）

- **高度なイベント設定**
  - イベント複製機能
  - タイムテーブル作成
  - カスタムフィールド設定

- **カスタムアンケート作成**
  - 質問タイプのカスタマイズ
  - 条件分岐を含む高度なアンケート

- **高度な分析機能**
  - グラフィカルレポート
  - データの詳細分析

- **マルチ言語対応**
  - UI多言語化
  - 多言語コンテンツ管理

### 7.3 MVP開発スケジュール

1. **設計・準備期間**: 2週間
   - 要件の最終確認
   - DB設計の確定
   - Docker環境の構築

2. **フェーズ1開発**: 6週間
   - 基本認証システム: 1週間
   - イベント管理（基本）: 2週間
   - 参加申し込み（基本）: 1週間
   - 入場管理（コア機能）: 2週間

3. **MVP内部テスト**: 1週間
   - 機能テスト
   - ユーザビリティテスト

4. **MVPリリース**: 9週間目
   - 限定ユーザーへのリリース
   - フィードバック収集

5. **フェーズ2開発**: 4週間
   - アンケート機能（基本）: 2週間
   - 参加者データエクスポート: 1週間
   - イベント管理（拡張）: 1週間

### 7.4 MVP評価指標

以下の指標を用いてMVPの成功を評価します：

1. **ユーザー獲得と継続率**
   - 初期ユーザー獲得数
   - DAU/MAU比率
   - ユーザー継続率（1週間後、1ヶ月後）

2. **機能利用状況**
   - イベント作成数
   - 参加申し込み数
   - QRコードを使用した入場率

3. **パフォーマンスと安定性**
   - エラー発生率
   - ページ読み込み時間
   - システム稼働率

4. **ユーザーフィードバック**
   - NPS（Net Promoter Score）
   - 機能別満足度
   - 改善要望の収集と分析

MVPから得られたデータと知見に基づき、次のフェーズの機能優先度と開発計画を調整します。

## 8. 拡張機能（将来的な実装候補）

- 決済機能連携
- SNS連携・シェア機能
- 複数管理者によるイベント共同管理
- イベントタイムテーブル作成機能
- 参加者同士のネットワーキング機能
- ポイント・リワード機能
- モバイルアプリ（iOS/Android）
- オフライン対応機能
- AIを活用した参加者マッチング
- イベント分析・インサイトレポート
